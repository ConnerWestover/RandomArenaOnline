
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<style>
		*{text-align:center;}
		canvas{border:1px solid gray;}
		#audioControls{ display:none;}
	</style>
    <script src='js/loader.js'></script>
    <script src='js/utilities.js'></script>
  	<script src='js/main.js'></script>
	<script src='js/keys.js'></script>
	<script src='js/sound.js'></script>
	<script src='js/items.js'></script>
	<script src="http://code.createjs.com/preloadjs-0.4.1.min.js"></script>
	<script src='js/emitter.js'></script>
	
  <script type="text/javascript">
     WebFontConfig = {
		google: { families: [ 'Permanent+Marker::latin' ] }
	  };
	  (function() {
		var wf = document.createElement('script');
		wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
		  '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
		wf.type = 'text/javascript';
		wf.async = 'true';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(wf, s);
	  })(); 
  </script>
  <script type = "text/javascript">
    
    "use strict";
    
    var room = "";
    var canvas = undefined;
    var ctx = undefined;
    var WIDTH = 1200;
    var HEIGHT = 800;

    var MenuState = {
      MAIN_MENU : 0,
      OPTIONS: 1,
      INSTRUCTIONS: 2,
      ABOUT: 3,
      LOBBY: 4
    };
    
    var state = MenuState.MAIN_MENU;
    
    const init = () =>{
      window.addEventListener("click", onMouseUp, true);
      
      canvas = document.querySelector('canvas');
      ctx = canvas.getContext("2d");
      ctx.save();
      ctx.strokeStyle = "black";
	  ctx.lineWidth = 4;
	  ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30, WIDTH*3/4, HEIGHT/6);
	  ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30 + HEIGHT/6 + 15, WIDTH*3/4, HEIGHT/6);
	  ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30  + HEIGHT*2/6 + 30, WIDTH*3/4, HEIGHT/6);
      ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30  + HEIGHT*3/6 + 45, WIDTH*3/4, HEIGHT/6);
	   
	  ctx.textAlign = "center";
	  ctx.textBaseline = "middle";
	  
	  fillText(ctx, "Down The Rabbit Hole", this.WIDTH/2, 50, "50pt Permanent Marker", "red");
	  fillText(ctx, "Play", this.WIDTH/2, this.HEIGHT/8 + 30+ this.HEIGHT/11, "50pt Permanent Marker", "black");
	  fillText(ctx, "Instructions", this.WIDTH/2, this.HEIGHT/6 + 30 + this.HEIGHT/4 - 10, "50pt Permanent Marker", "black");
	  fillText(ctx, "Options", this.WIDTH/2, this.HEIGHT*2/6 + 30 + this.HEIGHT/4 + 5, "50pt Permanent Marker", "black");
	  fillText(ctx, "About", this.WIDTH/2, this.HEIGHT*3/6 + 30 + this.HEIGHT/4+ 20, "50pt Permanent Marker", "black");
	  ctx.restore();
    };
    
    const update = () =>{     
      ctx.clearRect(0,0,WIDTH,HEIGHT);
      if (state == MenuState.MAIN_MENU){
		ctx.save();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 4;
        ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30, WIDTH*3/4, HEIGHT/6);
        ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30 + HEIGHT/6 + 15, WIDTH*3/4, HEIGHT/6);
        ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30  + HEIGHT*2/6 + 30, WIDTH*3/4, HEIGHT/6);
        ctx.strokeRect(WIDTH/8, HEIGHT/8 + 30  + HEIGHT*3/6 + 45, WIDTH*3/4, HEIGHT/6);

        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        fillText(ctx, "Down The Rabbit Hole", this.WIDTH/2, 50, "50pt Permanent Marker", "red");
        fillText(ctx, "Play", this.WIDTH/2, this.HEIGHT/8 + 30+ this.HEIGHT/11, "50pt Permanent Marker", "black");
        fillText(ctx, "Instructions", this.WIDTH/2, this.HEIGHT/6 + 30 + this.HEIGHT/4 - 10, "50pt Permanent Marker", "black");
        fillText(ctx, "Options", this.WIDTH/2, this.HEIGHT*2/6 + 30 + this.HEIGHT/4 + 5, "50pt Permanent Marker", "black");
        fillText(ctx, "About", this.WIDTH/2, this.HEIGHT*3/6 + 30 + this.HEIGHT/4+ 20, "50pt Permanent Marker", "black");
	  ctx.restore();
		} else if (state == MenuState.INSTRUCTIONS){
			ctx.save();
			ctx.strokeStyle = "black";
			ctx.fillStyle = "black";
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
			ctx.lineWidth = 4;
			fillText(ctx, "Instructions", this.WIDTH/2, this.HEIGHT/8, "60pt Permanent Marker", "black");
			fillText(ctx, "WASD to move the player", this.WIDTH/2, this.HEIGHT*2/5, "30pt Permanent Marker", "black");
			fillText(ctx, "Arrow Keys to fire bullets", this.WIDTH/2, this.HEIGHT*2/5 - 40, "30pt Permanent Marker", "black");
			fillText(ctx, "Defeat anyone who enters the arena", this.WIDTH/2, this.HEIGHT*2/5 + 70, "30pt Permanent Marker", "black");
			fillText(ctx, "Gain points by defeating enemies", this.WIDTH/2, this.HEIGHT*2/5 + 110, "30pt Permanent Marker", "black");
			fillText(ctx, "Pickup weapons by walking over them", this.WIDTH/2, this.HEIGHT*2/5 + 200, "30pt Permanent Marker", "black");
			fillText(ctx, "Fight until you drop", this.WIDTH/2, this.HEIGHT*2/5 + 240, "30pt Permanent Marker", "black");
			
			fillText(ctx, "Back", 60, 30, "30pt Permanent Marker", "black");
			ctx.strokeRect(0,0,130,60);
			
			ctx.restore();
		} else if (state == MenuState.OPTIONS){
			ctx.save();
			ctx.strokeStyle = "black";
			ctx.fillStyle = "black";
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
			ctx.lineWidth = 4;
			fillText(ctx, "Back", 60, 30, "30pt Permanent Marker", "black");
			fillText(ctx, "Options", this.WIDTH/2, this.HEIGHT/8, "60pt Permanent Marker", "black");
			fillText(ctx, "This section is currently", this.WIDTH/2, this.HEIGHT*2/5, "30pt Permanent Marker", "black");
			fillText(ctx, "under construction", this.WIDTH/2, this.HEIGHT*2/5+40, "30pt Permanent Marker", "black");
			ctx.strokeRect(0,0,130,60);
			ctx.restore();
		} else if (state == MenuState.ABOUT){
			ctx.save();
			ctx.strokeStyle = "black";
			ctx.fillStyle = "black";
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
			ctx.lineWidth = 4;
			fillText(ctx, "Back", 60, 30, "30pt Permanent Marker", "black");
			fillText(ctx, "About", this.WIDTH/2, this.HEIGHT/8, "60pt Permanent Marker", "black");
			fillText(ctx, "Down The Rabbit Hole was created by:", this.WIDTH/2, this.HEIGHT*2/5, "30pt Permanent Marker", "black");
			fillText(ctx, "Alexander Huffman", this.WIDTH/2, this.HEIGHT*2/5+40, "30pt Permanent Marker", "black");
			fillText(ctx, "Conner Westover", this.WIDTH/2, this.HEIGHT*2/5+80, "30pt Permanent Marker", "black");
			ctx.strokeRect(0,0,130,60);
			ctx.restore();
		} else if (state == MenuState.LOBBY){
          ctx.save();
          ctx.strokeStyle = "black";
			ctx.fillStyle = "black";
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
            fillText(ctx, "Back", 60, 30, "30pt Permanent Marker", "black");
          ctx.restore();
        }
		
    };
    
    const fillText = (ctx, string, x, y, css, color) => {
		ctx.save();
		ctx.font = css;
		ctx.fillStyle = color;
		ctx.fillText(string, x, y);
		ctx.restore();
	};
    
   function onMouseUp(e){
     var mouse = getMouse(e);

		if(state == MenuState.MAIN_MENU){
			if (mouse.x > this.WIDTH/8 && mouse.x < this.WIDTH/8 + this.WIDTH*3/4 &&
			    mouse.y > this.HEIGHT/8 + 30  && mouse.y < this.HEIGHT/8 + 30 + this.HEIGHT/6){
				
				state = MenuState.LOBBY;
              GameStart();
			} else if (mouse.x > this.WIDTH/8 && mouse.x < this.WIDTH/8 + this.WIDTH*3/4 &&
			    mouse.y > this.HEIGHT/8 + 30 + this.HEIGHT/6 + 15 && mouse.y < this.HEIGHT/8 + 30 + this.HEIGHT/6 + 15 + this.HEIGHT/6){
				
				state = MenuState.INSTRUCTIONS;
				
			} else if (mouse.x > this.WIDTH/8 && mouse.x < this.WIDTH/8 + this.WIDTH*3/4 &&
			    mouse.y > this.HEIGHT/8 + 30 + this.HEIGHT*2/6 + 30 && mouse.y < this.HEIGHT/8 + 30  + this.HEIGHT*2/6 + 30 + this.HEIGHT/6){
				
				state = MenuState.OPTIONS;
				
			} else if (mouse.x > this.WIDTH/8 && mouse.x < this.WIDTH/8 + this.WIDTH*3/4 &&
			    mouse.y > this.HEIGHT/8 + 30  + this.HEIGHT*3/6 + 45 && mouse.y < this.HEIGHT/8 + 30  + this.HEIGHT*3/6 + 45 + this.HEIGHT/6){
				
				state = MenuState.ABOUT
				
			}
		} else if ( state == MenuState.INSTRUCTIONS ||
					state == MenuState.OPTIONS ||
					state == MenuState.ABOUT ||
                    state == MenuState.LOBBY){
			if (mouse.x < 130 && mouse.y < 60){
				state = MenuState.MAIN_MENU;
			}
		}
		update();
	};
    
    window.onload = init;
  </script>
	<title>Random Arena</title>
</head>
<body>
	<canvas height = 800 width = 1200>
		Get a real browser!
	</canvas>
  <form>
    Username: <input type="text" name="Username" value="Unknown">
  </form>
	
  <!--<section id="audioControls">
		<audio id="bgAudio" src="media/background.wav" controls loop></audio>
		<audio id="effectAudio" controls></audio>
	</section>-->
  
</body>
</html>
